include mixin-bglink-full

section.blogpost-prevnext.wrapper
    header.section__header
        h1 Blog navigation
    .content
        //- Find the current post in the blog array
        - var currentPostIndex = 0
        - var postCount = locals.blogposts.length
        - var i = 0

        - each post, i in locals.blogposts
            - if (post._url === locals.post._url)
                - currentPostIndex = i
                - break

        //- Get the next and previous blogpost
        - var nextPostIndex = i + 1
        - var previousPostIndex = i - 1

        //- Check for boundaries and correct the post indices
        - if (nextPostIndex > (postCount - 1))
            - nextPostIndex = 0
        - if (previousPostIndex < 0)
            - previousPostIndex = postCount - 1

        //- Store the previous and next blogpost in a variable for readability
        - var previousPost = locals.blogposts[previousPostIndex]
        - var nextPost = locals.blogposts[nextPostIndex]

        ul
            li.first
                +bglink-full(previousPost._url, 'Read ' + previousPost.title, previousPost.image, previousPost.imageDest)
                    h2 #{previousPost.title}
                    p.meta #{previousPost.dateFull} <span class="separator">|</span> #{previousPost.timetoread}
            li.last
                +bglink-full(nextPost._url, 'Read ' + nextPost.title, nextPost.image, nextPost.imageDest)
                    h2 #{nextPost.title}
                    p.meta #{nextPost.dateFull} <span class="separator">|</span> #{nextPost.timetoread}
